<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Grunt打造前端自动化工作流 · 融点Sonic的博客</title><meta name="description" content="Grunt打造前端自动化工作流 - Sonic"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iamsonic.net/atom.xml" title="融点Sonic的博客"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">融点Sonic的博客</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>首页</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>归档</p></a><a href="/about" target="_self" class="li component-nav-item"><p>关于我</p></a><ul class="shortcut-icons"><a href="https://github.com/sonic0828" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">Grunt打造前端自动化工作流</h1><div class="post-info">Jul 15, 2013</div><div class="post-content"><p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/grunt-1.jpg" alt="blog-img"></p>
<h2 id="Grunt这货是啥？"><a href="#Grunt这货是啥？" class="headerlink" title="Grunt这货是啥？"></a>Grunt这货是啥？</h2><p>最近很火的前端自动化小工具，基于任务的命令行构建工具 <a href="http://gruntjs.com" target="_blank" rel="external">http://gruntjs.com</a></p>
<p>&nbsp;</p>
<h2 id="Grunt能帮我们干啥？"><a href="#Grunt能帮我们干啥？" class="headerlink" title="Grunt能帮我们干啥？"></a>Grunt能帮我们干啥？</h2><h3 id="在开始介绍前，先向大家描述下面的场景"><a href="#在开始介绍前，先向大家描述下面的场景" class="headerlink" title="在开始介绍前，先向大家描述下面的场景:"></a>在开始介绍前，先向大家描述下面的场景:</h3><h4 id="【场景1：项目开始前】"><a href="#【场景1：项目开始前】" class="headerlink" title="【场景1：项目开始前】"></a>【场景1：项目开始前】</h4><ol>
<li>先建立一个 projA 的文件夹 再建 html css js images （建5个或以上文件夹，花费1分钟）</li>
<li>拷贝 CSS库（Yui Reset | bootstrap）JS库（Requiet.js | Seajs | jQuery | jQuery插件 ） 进相应目录（拷贝 N个文件，花费N分钟）</li>
<li>再新建 html/index.html js/comm.js css/base.css css/comm.css css/module-A.css …… （建N个文件，花费N分钟）</li>
</ol>
<h4 id="【场景2：编码中】"><a href="#【场景2：编码中】" class="headerlink" title="【场景2：编码中】"></a>【场景2：编码中】</h4><p>编辑器编码 =&gt; 切换到浏览器F5 =&gt; 编辑器编码 =&gt; 切换到浏览器F5 =&gt; 编辑器编码 =&gt; 切换到浏览器F5 =&gt; 编辑器编码 =&gt; 切换到浏览器F5 …………</p>
<p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/grunt-2.jpg" alt="F5按爆"></p>
<p>键盘就这样杯具了….</p>
<h4 id="【场景3：编码完成】"><a href="#【场景3：编码完成】" class="headerlink" title="【场景3：编码完成】"></a>【场景3：编码完成】</h4><ol>
<li>HTML去掉注析、换行符 - HtmlMin</li>
<li>CSS文件压缩合并 – CssMinify</li>
<li>JS代码风格检查 – JsHint</li>
<li>JS代码压缩 – Uglyfy</li>
<li>image压缩 - imagemin</li>
</ol>
<p>&nbsp;</p>
<p>在一个项目过程中，重复而枯燥的工作太多了…. <strong>绳命就这样浪费了。</strong></p>
<p>我们需要一个自动化的工作流程，让我们更专注于coding，而不是coding外的繁琐工作。于是Grunt应运而生。可以想像，如果在node环境下，一行命令搞定一个场景，So Cool…</p>
<p>&nbsp;</p>
<h2 id="Grunt安装配置"><a href="#Grunt安装配置" class="headerlink" title="Grunt安装配置"></a>Grunt安装配置</h2><h3 id="安装-grunt-cli"><a href="#安装-grunt-cli" class="headerlink" title="安装 grunt-cli"></a>安装 grunt-cli</h3><ol>
<li><ol>
<li>自备node环境(&gt;0.8.0), npm包管理</li>
</ol>
</li>
<li><ol>
<li>卸载旧版本grunt（&lt;0.4.0） (没装过请忽略)</li>
</ol>
<p>npm uninstall grunt -g`</p>
</li>
<li><p>安装grunt-cli</p>
<pre>`npm install grunt-cli -g`</pre>

<p>&nbsp;</p>
<h3 id="安装-grunt-init-可选"><a href="#安装-grunt-init-可选" class="headerlink" title="安装 grunt-init(可选)"></a>安装 grunt-init(可选)</h3><p><code>npm install grunt-init -g</code></p>
<p>可选安装，grunt-init是个脚手架工具，它可以帮你完成项目的自动化创建，包括项目的目录结构，每个目录里的文件等。具体情况要看你运行grunt-init指定的模板，以及创建过程中你对问题的回答。由于篇幅且配置 grunt-init 模板较为复杂，本章暂不展开讨论，有兴趣的童鞋可私下了解。</p>
<p>&nbsp;</p>
<h3 id="配置-grunt"><a href="#配置-grunt" class="headerlink" title="配置 grunt"></a>配置 grunt</h3><p>从官网下载package.json Gruntfile.js 文件放到项目根目录，并对文件进行修改配置.</p>
<p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/directory1.png" alt="Directory"></p>
</li>
</ol>
<ul>
<li><code>package.json</code> //项目自动化所依赖的相关插件。</li>
<li><p><code>Gruntfile.js</code> //项目自动化工作流配置文件，重要</p>
<p>&nbsp;</p>
<h4 id="1-package-json-文件修改-官方文件地址"><a href="#1-package-json-文件修改-官方文件地址" class="headerlink" title="1. package.json 文件修改 官方文件地址"></a>1. package.json 文件修改 <a href="http://gruntjs.com/getting-started#package.json" target="_blank" rel="external">官方文件地址</a></h4><p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/grunt-3.png" alt="package.json"></p>
<h4 id="2-Gruntfile-js-文件修改-官方文件地址"><a href="#2-Gruntfile-js-文件修改-官方文件地址" class="headerlink" title="2. Gruntfile.js 文件修改 官方文件地址"></a>2. Gruntfile.js 文件修改 <a href="http://gruntjs.com/getting-started#an-example-gruntfile" target="_blank" rel="external">官方文件地址</a></h4><p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/grunt-4.png" alt="Gruntfile.js"></p>
<p>&nbsp;</p>
<h2 id="开始一个实例"><a href="#开始一个实例" class="headerlink" title="开始一个实例"></a>开始一个实例</h2><h3 id="这里以projA为例子，实现的自动化功能如下："><a href="#这里以projA为例子，实现的自动化功能如下：" class="headerlink" title="这里以projA为例子，实现的自动化功能如下："></a>这里以projA为例子，实现的自动化功能如下：</h3></li>
<li><p>编码过程中自动监控projA目录，如果 .html/ .css/ .js文件变更时，自动刷新浏览器。</p>
</li>
<li><p>编码完成后，压缩html、css、js、img文件,并存放到dist/目录下。</p>
<p><img src="http://iamsonic-1253772978.cosgz.myqcloud.com/blog/grunt-intro/grunt-5.png" alt="Directory"></p>
<p>&nbsp;</p>
<h3 id="对应的操作步骤如下："><a href="#对应的操作步骤如下：" class="headerlink" title="对应的操作步骤如下："></a>对应的操作步骤如下：</h3></li>
</ul>
<ol>
<li><ol>
<li>先配置好package.json、Gruntfile.js两个文件，<a href="http://share.weiyun.com/68d8de76b4c09f7c8afab92e0de87cf4" target="_blank" rel="external">projA文件打包下载
</a></li>
</ol>
</li>
<li><ol>
<li>执行命令自动下载相对应的Grunt插件<a href="http://dwz.cn/9b8lk" target="_blank" rel="external">【视频演示戳这里】</a><br><strong>命令行执行:</strong><pre>`npm install`</pre></li>
</ol>
</li>
<li><ol>
<li>启动文件变更监控(livereload)<a href="http://dwz.cn/9b8pJ" target="_blank" rel="external">【视频演示戳这里】</a><br><strong>命令行执行:</strong><pre>`grunt live`</pre></li>
</ol>
</li>
<li><ol>
<li>编码完成后Build<a href="http://dwz.cn/9b8yw" target="_blank" rel="external">【视频演示戳这里】</a><br><strong>命令行执行:</strong><br><pre>`grunt build</pre></li>
</ol>
</li>
</ol>
<p>&nbsp;</p>
<h2 id="Grunt使用总结"><a href="#Grunt使用总结" class="headerlink" title="Grunt使用总结"></a>Grunt使用总结</h2><ol>
<li>配置简单，配置文件Gruntfile.js是JS格式，比较贴近前端知识点。相对Ant之类基于JAVA,又是xml配置，相对来说学习成本低。</li>
<li>Grunt能为我们做的远不只这么多,很多Grunt插件待我们去挖掘使用。<blockquote>
<p>比如：haml less coffeeScript dataURI html2json</p>
</blockquote>
</li>
<li>每个人的具体需求不一样，可以按自己的习惯合理配置，组合成最适合自己的自动化工作流。</li>
<li>Grunt团队很勤劳，社区活跃，有兴趣可以持续关注。</li>
</ol>
</div></article></div></div><div id="uyan_frame"></div><script id="uYan" src="http://v2.uyan.cc/code/uyan.js?uid=2134360"></script></main><footer class="footer-container"><div class="paginator"><a href="/2016/03/10/new-gulp4/" class="prev">PREV</a><a href="/2012/09/09/franklin-13/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://iamsonic.net">Sonic</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-99821735-1",'auto');ga('send','pageview');</script></body></html>